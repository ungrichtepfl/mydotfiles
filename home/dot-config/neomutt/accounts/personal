# vim: ft=muttrc

set folder     = ~/Mail/Personal
set spoolfile  = +INBOX
set record     = +Sent
set trash      = +Deleted
set from       = "christoph.ungricht@outlook.com"
set realname   = "Christoph Ungricht"

# Send email
set imap_user           = 'christoph.ungricht@outlook.com'
set smtp_authenticators = "xoauth2"
set ssl_starttls        = yes
set ssl_force_tls       = yes
set smtp_oauth_refresh_command = "/usr/share/neomutt/oauth2/mutt_oauth2.py ~/.config/neomutt/outlooktoken"
set smtp_url = "smtp://$imap_user@smtp.office365.com:587"

# NOTE: Remap for each account:
macro index I "<enter-command>unset wait_key<enter><enter-command>echo 'Syncing account \"Personal\" with IMAP server in the background...'<enter><shell-escape>bash -c '(mbsync Personal &>/dev/null && notify-send \"Successfully syncd emails!\" &>/dev/null) || notify-send -u critical \"Failed to sync emails\" &>/dev/null' &<enter><enter-command>set wait_key=yes<enter>" \
        "Sync IMAP account."

# set status: black (color0) text, yellow (color11) foreground
# color status color0 color39  # change status color for this account
