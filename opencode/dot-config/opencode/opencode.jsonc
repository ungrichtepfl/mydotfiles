{
  "$schema": "https://opencode.ai/config.json",
  // Use Plan agent as default when starting OpenCode
  "default_agent": "plan",
  // Custom keybind configuration
  "keybinds": {
    "variant_cycle": "ctrl+k", // Changed from default ctrl+t
  },
  // Doom loop prevention - prompt when same tool call repeats 3 times
  "permission": {
    "doom_loop": "ask",
    // Bash commands - ask by default, whitelist safe dev tools
    "bash": {
      "*": "ask",
      // --- Safe whitelisted commands ---
      // Git (read-only and safe operations)
      "git status": "allow",
      "git status *": "allow",
      "git diff": "allow",
      "git diff *": "allow",
      "git log": "allow",
      "git log *": "allow",
      "git show": "allow",
      "git show *": "allow",
      "git branch": "allow",
      "git branch *": "allow",
      "git remote": "allow",
      "git remote *": "allow",
      "git fetch": "allow",
      "git fetch *": "allow",
      "git pull": "allow",
      "git pull *": "allow",
      "git add *": "allow",
      "git commit": "allow",
      "git commit *": "allow",
      "git stash": "allow",
      "git stash *": "allow",
      "git tag": "allow",
      "git tag *": "allow",
      "git blame *": "allow",
      "git rev-parse *": "allow",
      "git ls-files": "allow",
      "git ls-files *": "allow",
      "git merge-base *": "allow",
      // File listing and navigation
      "ls": "allow",
      "ls *": "allow",
      "tree": "allow",
      "tree *": "allow",
      "pwd": "allow",
      "which *": "allow",
      "whereis *": "allow",
      "file *": "allow",
      "stat *": "allow",
      "wc *": "allow",
      "du": "allow",
      "du *": "allow",
      "df": "allow",
      "df *": "allow",
      // Search and find
      "find *": "allow",
      "fd *": "allow",
      "rg *": "allow",
      "grep *": "allow",
      "ag *": "allow",
      "fzf": "allow",
      "fzf *": "allow",
      "locate *": "allow",
      // Text processing (read-only)
      "cat *": "allow",
      "head *": "allow",
      "tail *": "allow",
      "less *": "allow",
      "more *": "allow",
      "sort *": "allow",
      "uniq *": "allow",
      "cut *": "allow",
      "awk *": "allow",
      "sed *": "allow",
      "jq *": "allow",
      "yq *": "allow",
      "xq *": "allow",
      "diff *": "allow",
      "comm *": "allow",
      "tr *": "allow",
      "column *": "allow",
      // Build tools and package managers
      "make": "allow",
      "make *": "allow",
      "cmake *": "allow",
      "ninja": "allow",
      "ninja *": "allow",
      "cargo *": "allow",
      "rustc *": "allow",
      "rustup *": "allow",
      "go *": "allow",
      "npm *": "allow",
      "npx *": "allow",
      "yarn *": "allow",
      "pnpm *": "allow",
      "node *": "allow",
      "deno *": "allow",
      "bun *": "allow",
      "python *": "allow",
      "python3 *": "allow",
      "pip *": "allow",
      "pip3 *": "allow",
      "poetry *": "allow",
      "uv *": "allow",
      "ruff *": "allow",
      "black *": "allow",
      "mypy *": "allow",
      "pytest": "allow",
      "pytest *": "allow",
      "elm *": "allow",
      "elm-* *": "allow",
      "ghc *": "allow",
      "ghci": "allow",
      "ghci *": "allow",
      "cabal *": "allow",
      "stack *": "allow",
      "dotnet *": "allow",
      "msbuild *": "allow",
      "zig *": "allow",
      "gcc *": "allow",
      "g++ *": "allow",
      "clang *": "allow",
      "clang++ *": "allow",
      "clangd *": "allow",
      "gdb *": "allow",
      "lldb *": "allow",
      "valgrind *": "allow",
      "lua *": "allow",
      "luarocks *": "allow",
      "slint-* *": "allow",
      // Linters and formatters
      "eslint *": "allow",
      "prettier *": "allow",
      "shellcheck *": "allow",
      "shfmt *": "allow",
      "stylua *": "allow",
      "clang-format *": "allow",
      "clang-tidy *": "allow",
      "gofmt *": "allow",
      "goimports *": "allow",
      "golangci-lint *": "allow",
      "rustfmt *": "allow",
      "cargo clippy": "allow",
      "cargo clippy *": "allow",
      "hlint *": "allow",
      "fourmolu *": "allow",
      "ormolu *": "allow",
      "elm-format *": "allow",
      "elm-review *": "allow",
      // Text editors
      "nvim --headless *": "allow",
      // Docker (read-only and safe)
      "docker ps": "allow",
      "docker ps *": "allow",
      "docker images": "allow",
      "docker images *": "allow",
      "docker logs *": "allow",
      "docker inspect *": "allow",
      "docker stats": "allow",
      "docker stats *": "allow",
      "docker compose ps": "allow",
      "docker compose ps *": "allow",
      "docker compose logs *": "allow",
      "docker build *": "allow",
      "docker run *": "allow",
      "docker exec *": "allow",
      "docker compose up *": "allow",
      "docker compose down": "allow",
      "docker compose down *": "allow",
      "docker compose build *": "allow",
      // Process and system info (read-only)
      "ps": "allow",
      "ps *": "allow",
      "top": "allow",
      "top *": "allow",
      "htop": "allow",
      "htop *": "allow",
      "btop": "allow",
      "btop *": "allow",
      "pgrep *": "allow",
      "lsof": "allow",
      "lsof *": "allow",
      "ss": "allow",
      "ss *": "allow",
      "netstat": "allow",
      "netstat *": "allow",
      "ip *": "allow",
      "hostname": "allow",
      "hostname *": "allow",
      "uname": "allow",
      "uname *": "allow",
      "uptime": "allow",
      "free": "allow",
      "free *": "allow",
      "env": "allow",
      "printenv": "allow",
      "printenv *": "allow",
      "id": "allow",
      "id *": "allow",
      "whoami": "allow",
      "date": "allow",
      "date *": "allow",
      // Archive tools
      "tar *": "allow",
      "zip *": "allow",
      "unzip *": "allow",
      "gzip *": "allow",
      "gunzip *": "allow",
      "xz *": "allow",
      // Misc dev tools
      "curl *": "allow",
      "wget *": "allow",
      "ssh-keygen *": "allow",
      "gh *": "allow",
      "man *": "allow",
      "tldr *": "allow",
      "echo *": "allow",
      "printf *": "allow",
      "test *": "allow",
      "true": "allow",
      "false": "allow",
      "touch *": "allow",
      "mkdir *": "allow",
      "cp *": "allow",
      "mv *": "allow",
      "ln *": "allow",
      "xargs *": "allow",
      "tee *": "allow",
      "timeout *": "allow",
      "time *": "allow",
      "watch *": "allow",
      "nix *": "allow",
      "nix-*": "allow",
      "nix-* *": "allow",
      "direnv *": "allow",
      // --- Always deny - truly destructive ---
      // Recursive deletion of system/root directories
      "rm -rf /": "deny",
      "rm -rf /*": "deny",
      "rm -rf --no-preserve-root *": "deny",
      "rm -rf .*": "deny",
      // Dangerous permission changes to root filesystem
      "chmod -R 777 /": "deny",
      "chmod -R 777 /*": "deny",
      // Filesystem/disk destruction tools
      "mkfs *": "deny",
      "mkfs.*": "deny",
      "wipefs *": "deny",
      "shred *": "deny",
      "fdisk *": "deny",
      "parted *": "deny",
      "dd *of=/dev/*": "deny",
      "> /dev/sd*": "deny",
      "> /dev/nvme*": "deny",
      "> /dev/vd*": "deny",
      // Fork bomb and other shell exploits
      ":(){ :|:& };:": "deny",
    },
    // Protect sensitive files from reading
    "read": {
      "*": "allow",
      "*.env": "deny",
      "*.env.*": "deny",
      "*.env.example": "allow",
      "**/id_rsa": "deny",
      "**/id_ed25519": "deny",
      "**/.ssh/id_*": "deny",
      "**/credentials": "deny",
      "**/secrets.*": "deny",
    },
    // Protect sensitive files from editing
    "edit": {
      "**/id_rsa": "deny",
      "**/id_ed25519": "deny",
      "**/.ssh/id_*": "deny",
      "**/credentials": "deny",
      "**/secrets.*": "deny",
    },
  },
}
