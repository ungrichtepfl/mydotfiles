{
  "$schema": "https://opencode.ai/config.json",
  // Use Plan agent as default when starting OpenCode
  "default_agent": "plan",
  // Custom keybind configuration
  "keybinds": {
    "variant_cycle": "ctrl+k", // Changed from default ctrl+t
  },
  // Doom loop prevention - prompt when same tool call repeats 3 times
  "permission": {
    "doom_loop": "ask",
    // Dangerous bash commands - always deny
    "bash": {
      "*": "allow",
      // Potentially dangerous - ask first
      "rm -rf /usr*": "ask",
      "rm -rf /etc*": "ask",
      "rm -rf /var*": "ask",
      "rm -rf /opt*": "ask",
      "rm -rf /home*": "ask",
      "chmod -R *": "ask",
      "chown -R *": "ask",
      "sudo *": "ask",
      "docker rm *": "ask",
      "docker rmi *": "ask",
      "docker system prune *": "ask",
      "git push --force*": "ask",
      "git push -f *": "ask",
      "git reset --hard*": "ask",
      "git clean -fd*": "ask",
      "git checkout -- *": "ask",
      "kill *": "ask",
      "killall *": "ask",
      "pkill *": "ask",
      "shutdown *": "ask",
      "reboot *": "ask",
      "systemctl *": "ask",
      "service *": "ask",
      // Always deny - truly destructive
      "rm -rf /": "deny",
      "rm -rf /*": "deny",
      "rm -rf ~/*": "deny",
      "rm -rf $HOME": "deny",
      "rm -rf .*": "deny",
      "chmod -R 777 /": "deny",
      "chmod -R 777 /*": "deny",
      "chown -R * /": "deny",
      "chown -R * /*": "deny",
      "sudo dd *": "deny",
      "mkfs*": "deny",
      "dd if=* of=/dev/*": "deny",
      ":(){ :|:& };:": "deny", // Fork bomb
    },
    // Protect sensitive files from reading
    "read": {
      "*": "allow",
      "*.env": "deny",
      "*.env.*": "deny",
      "*.env.example": "allow",
      "**/id_rsa": "deny",
      "**/id_ed25519": "deny",
      "**/.ssh/id_*": "deny",
      "**/credentials": "deny",
      "**/secrets.*": "deny",
    },
    // Protect sensitive files from editing
    "edit": {
      "**/id_rsa": "deny",
      "**/id_ed25519": "deny",
      "**/.ssh/id_*": "deny",
      "**/credentials": "deny",
      "**/secrets.*": "deny",
    },
  },
}
